iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet) +
theme(legend.position = "none")
ggplotly(iplot)
library(rvest)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 2) +
theme(legend.position = "none")
ggplotly(iplot)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 2) +
theme(legend.position = "none")
ggplotly(iplot)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 2) +
theme(legend.position = "none")
ggplotly(iplot)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 2) +
theme(legend.position = "none")
ggplotly(iplot)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot, width = 10)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = 1:20, minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot, width = 10000)
ggplotly(iplot, width = 1000)
ggplotly(iplot, width = 1000, height = 1000)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(1,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot, width = 1000, height = 1000)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot, width = 1000, height = 1000)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point() +
geom_line(aes(group = inters)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, ncol = 3) +
theme(legend.position = "none")
ggplotly(iplot, width = 1000, height = 1000)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point(position_dodge(0.4)) +
geom_line(aes(group = inters), position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none")
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point(position = position_dodge(0.4)) +
geom_line(aes(group = inters), position = position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none")
ggplotly(iplot, width = 1000, height = 1000)
ggplotly(iplot, width = 1000, height = 500)
library(htmlwidgets)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, shape = inters, alpha = 0.5)) +
geom_point(position = position_dodge(0.4)) +
geom_line(aes(group = inters), position = position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none")
iplot <- ggplotly(iplot, width = 1000, height = 500)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point(position = position_dodge(0.4)) +
geom_line(aes(group = inters), position = position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none")
iplot <- ggplotly(iplot, width = 1000, height = 500)
iplot <- ggplotly(iplot, width = 1000, height = 500)
iplot <- ggplotly(iplot, width = 1000, height = 500)
iplot
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>% {
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2, 3))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point(position = position_dodge(0.4)) +
geom_line(aes(group = inters), position = position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text.x = element_blank())
iplot <- ggplotly(iplot, width = 1000, height = 500)
saveWidget()
iplot
saveWidget(ioplot, "howard_intersections.html")
saveWidget(iplot, "howard_intersections.html")
howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>%
filter(inters = "COLUMBIA PIKE + NO NAME")
howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>%
filter(inters == "COLUMBIA PIKE + NO NAME")
howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>%
filter(inters == "COLUMBIA PIKE + NO NAME")
howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>%
filter(inters == "COLUMBIA PIKE + NO NAME") %>%
select(latitude, longitude) %>%
leaflet() %>%
addTiles() %>%
addCircleMarkers(radius = 2,
clusterOptions = "yes"
)
iplot <- howard_39 %>%
unite("inters", c("mainroad_name", "reference_road_name"), sep = " + ") %>%
group_by(inters, year) %>%
summarize(n_cr = n()) %>%
filter(!str_detect(inters, "\\+\\sNA$")) %>%
filter(inters != "COLUMBIA PIKE + NO NAME") %>%{
.[, "facet"] <- recode_col(.$inters, c(rep(1:10, 10), 1, 2))
.
} %>%
ungroup() %>%
ggplot(aes(x = year, y = n_cr, colour = inters, alpha = 0.5)) +
geom_point(position = position_dodge(0.4)) +
geom_line(aes(group = inters), position = position_dodge(0.4)) +
# geom_line(aes(group = inter)) +
scale_y_continuous(breaks = seq(0,20, 2), minor_breaks = NULL, limits = c(0,20)) +
# geom_linerange(aes(ymin = mean, ymax = mean + sd), linetype = 1) +
labs(y = "number of crashes",
title = "Howard County, intersections of Columbia Pike") +
theme_bw() +
facet_wrap(~facet, nrow = 2) +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text.x = element_blank())
iplot <- ggplotly(iplot, width = 1000, height = 500)
saveWidget(iplot, "howard_intersections.html")
iplot
blogdown:::new_post_addin()
c_dat <- readRDS("/Users/heverz/Documents/R_projects/rden/static/data/data_crashes/c_dat.RDS")
library(leaflet)
library(tidyverse)
library(leaflet)
library(tidyverse)
c_dat <- readRDS("/Users/heverz/Documents/R_projects/rden/static/data/data_crashes/c_dat.RDS")
c_dat %>%
filter(year == 2019) %>%
distinct(county_desc)
c_dat %>%
filter(year == 2019, count_desc == "Baltimore City") %>%
distinct(county_desc)
c_dat %>%
filter(year == 2019, county_desc == "Baltimore City") %>%
distinct(county_desc)
c_dat %>%
filter(year == 2019, county_desc == "Baltimore City") %>%
distinct(year)
baltimore <- c_dat %>%
filter(year == 2019, county_desc == "Baltimore City")
baltimore <- baltimore %>%
select(latitude, longitude) %>%
leaflet() %>%                                         # fist line
addTiles() %>%                                        # second line
addCircleMarkers(radius = 2, clusterOptions = "yes")
baltimore
library(leaflet)
library(tidyverse)
c_dat <- readRDS("/Users/heverz/Documents/R_projects/rden/static/data/data_crashes/c_dat.RDS")
baltimore <- c_dat %>%
filter(year == 2019)
baltimore <- baltimore %>%
select(latitude, longitude) %>%
leaflet() %>%                                         # fist line
addTiles() %>%                                        # second line
addCircleMarkers(radius = 2, clusterOptions = "yes")
baltimore
md <- c_dat %>%
filter(year == 2019)
md <- baltimore %>%
select(latitude, longitude) %>%
leaflet() %>%                                         # fist line
addTiles() %>%                                        # second line
addCircleMarkers(radius = 2, clusterOptions = "yes")
inter_map
inter_map  <- md %>%
select(latitude, longitude) %>%
leaflet() %>%
addTiles() %>%
addCircleMarkers(radius = 2, clusterOptions = "yes")
saveWidget(inter_map, "md.html")
htmlwidgets::saveWidget(inter_map, "md.html")
getwd()
blogdown:::serve_site()
blogdown::build_site()
blogdown::build_site()
blogdown:::serve_site()
blogdown::build_site()
library(tidyverse)
library(janitor)
library(ggridges)
c_dat <- readRDS("~/Documents/R_projects/rden/static/data/data_crashes/c_dat.RDS")
# remove "SPUR FR " and SPUR TO " from mainroad_name and reference_road_name
c_dat <- c_dat %>%
mutate_at(c("mainroad_name", "reference_road_name"), ~ str_remove(., "(SPUR FR )|(SPUR TO )"))
c_dat %>%
filter(str_detect(reference_road_name, "29"))
c_dat %>%
filter(str_detect(
mainroad_name, "29"))
c_dat %>%
filter(str_detect(
mainroad_name, "US 29"))
%>%
c_dat %>%
filter(str_detect(
mainroad_name, "US 29")) %>%
group_by(year) %>%
summarize(count = n())
c_dat <- readRDS("~/Documents/R_projects/rden/static/data/data_crashes/c_dat.RDS")
c_dat %>%
filter(str_detect(
mainroad_name, "ramp"))
library(tidyverse)
library(janitor)
library(ggridges)
c_dat %>%
filter(str_detect(
mainroad_name, "ramp"))
mainroad_name, "Ramp")) %>%
c_dat %>%
filter(str_detect(
mainroad_name, "Ramp")) %>%
group_by(year) %>%
summarize(count = n())
mainroad_name, "Rp")) %>%
c_dat %>%
filter(str_detect(
mainroad_name, "Rp")) %>%
group_by(year) %>%
summarize(count = n())
c_dat <- read.csv("/Users/heverz/Documents/R_projects/rden/static/data/data_crashes/Maryland_Statewide_Vehicle_Crashes.csv", na.strings=c(""," ","NA")) %>%
janitor::clean_names()
c_dat %>%
filter(str_detect(
mainroad_name, "Ramp"))
c_dat %>%
filter(str_detect(
reference_road_name, "Ramp"))
View(c_dat)
